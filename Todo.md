# Todo

## 追加のやるべきこと
- 複数ルール時のナビゲーション選択不具合の調査
- `src/main.ts` の `resolveNavigationTarget` を、アクティブファイルを含むルールのみで前後移動するよう修正
- 複数ルール用のテストケースを `tests/navigation.test.ts` に追加
- すべてのテストがグリーンであることを確認

## やったこと
- ルール未一致時に先頭ルールへフォールバックしていた挙動を廃止し、次のルール評価へ進むように修正
- 2 つの新規テストを追加：
- アクティブファイルが第2ルールにのみ一致する場合に第2ルールで前進することを検証
- どのルールにも一致しない場合に移動せず通知することを検証
## やるべきこと
- 共通ルール（日本語対応、Todo更新、細かなコミット、テストグリーン、コメント日本語、多言語対応）を常に遵守する
- ルール操作ボタンをアイコンに置き換え、ホットキー導線の見た目を強化する
- ファイル移動のルール定義とグループ管理ロジックを実装する
- 設定データと移動アルゴリズムの統合テストを追加し、エッジケースを網羅する

## やったこと
- obsidian-sample-plugin を参考に初期構成（manifest、versions、rollup、tsconfig）と .gitignore を作成
- package.json に依存関係とビルド／テストスクリプトを設定
- i18n 基盤（Translator と英日 JSON ロケール）とプラグイン骨組み、スタイルプレースホルダーを実装
- Vitest 設定と翻訳ロジックのサンプルテストを追加
- README に概要、インストール手順、コマンド一覧、テスト方法、i18n 説明を追記
- 設定画面（グループ／ルール管理 UI と保存処理）を実装し、関連テストとスタイルを追加

## 追加のやるべきこと
- 前後移動時のループ停止実装
- 最古(oldest)移動コマンドの追加
- コマンド登録とラベル、i18n 更新
- テスト追加・更新（境界停止/最古移動）

## やったこと
- 前後移動で先頭/末尾に到達した場合は停止するよう修正
- 最古(oldest)移動を追加し、アクティブファイルを含むルールで選択
- コマンド配列・表示ラベル・i18n キーを更新（commands.navigateOldest）
- テストを更新（ループ停止）および追加（next 停止/oldest 複数ルール）

## 追加のやるべきこと（2026-02-15 UI調整）
- グループとルールの削除ボタン色を落ち着いたトーンへ変更（編集ボタンと同等）
- ルール並び替えボタンを最下行から最上位行（編集・削除と同一行）へ移動
- テスト実行でグリーン確認

## やったこと（2026-02-15 UI調整）
- グループ削除ボタンの `subtle-danger` を外し、編集ボタンと同じトーンに統一
- ルールの並び替え（↑/↓）ボタンをヘッダー行へ移動し、削除ボタンと同一行に配置

## 追加のやるべきこと（2026-02-15 ホットキー遷移修正）
- 「ホットキー設定を開く」クリック時にホットキータブが開かない不具合の原因調査
- ホットキー設定タブへ確実に遷移するよう修正
- テスト実行で既存挙動に問題がないことを確認

## やったこと（2026-02-15 ホットキー遷移修正）
- `openHotkeySettings` の検索入力自動設定処理を削除し、設定画面の意図しないフィルター発火を解消
- `app:open-hotkeys` コマンドを優先実行し、失敗時のみ `openTabById('hotkeys')` へフォールバックするよう修正
- `npm test` を実行し、全テスト通過を確認

## 追加のやるべきこと（2026-02-15 ホットキー検索条件）
- 「ホットキー設定を開く」押下時にホットキー画面へ確実に遷移するよう再調整
- 遷移後の検索条件を `File Navigator: Home` で自動入力する
- テスト実行で既存機能への影響がないことを確認

## やったこと（2026-02-15 ホットキー検索条件）
- `openHotkeySettings` でホットキー画面表示後に検索欄へ値を投入する処理を追加
- 検索条件を `File Navigator: Home` に固定して自動設定するよう変更
- `npm test` を実行し、全テスト通過を確認

## 追加のやるべきこと（2026-02-15 ホットキー検索エラー対応）
- 「Operator `navigator` not recognized」エラーの再発を防ぐため検索入力先の特定ロジックを見直す
- ホットキー検索語の投入処理を安全化し、失敗時のフォールバックを追加
- テスト実行で既存機能に影響がないことを確認

## やったこと（2026-02-15 ホットキー検索エラー対応）
- ホットキー検索対象をホットキー専用入力に限定し、設定全体検索への誤入力を回避
- 検索語をクォートして投入し、クエリ解釈失敗時は `File Navigator Home` へフォールバック
- `npm test` を実行し、全テスト通過を確認

## 追加のやるべきこと（2026-02-15 Templater実装調査）
- Templater プラグインの「ホットキー設定を開く」実装を確認
- 同方式で本プラグインに適用可能か検証
- 必要なら実装修正とテスト実行

## やったこと（2026-02-15 Templater実装調査）
- Templater（`src/settings/Settings.ts`）の `activeTab.searchComponent.inputEl` と `updateHotkeyVisibility()` を使う実装を確認
- `openHotkeySettings` を同方式へ寄せ、ホットキータブの検索欄へ直接検索語を設定するよう修正
- `npm test` を実行し、全テスト通過を確認

## 追加のやるべきこと（2026-02-15 BRAT対応）
- BRAT配布で必要な成果物（`main.js`/`manifest.json`/`styles.css`）をリポジトリ直下へ同期する仕組みを追加
- `package.json` と `README.md` に BRAT公開・更新手順を追記
- ビルドとテストを実行して動作確認

## やったこと（2026-02-15 BRAT対応）
- `scripts/sync-brat-assets.mjs` を追加し、`build` からリポジトリ直下へ `main.js` / `manifest.json` / `styles.css` を同期可能にした
- `package.json` に `npm run build:brat` を追加し、ビルドと同期を一括実行できるようにした
- `README.md` に BRAT公開手順（開発者向け）を追記した
- `npm run build:brat` と `npm test` を実行し、成果物更新と全テスト通過を確認した

## 追加のやるべきこと（2026-02-22 GitHub Actions対応）
- タグpushで GitHub Release を自動作成する workflow を追加
- Release assets に `main.js` / `manifest.json` / `styles.css` を自動添付
- `manifest.json` の version とタグの整合性チェックを追加
- テスト実行で既存機能に影響がないことを確認

## やったこと（2026-02-22 GitHub Actions対応）
- `.github/workflows/release.yml` を追加し、タグpush時に GitHub Release を自動作成するようにした
- Release assets に `main.js` / `manifest.json` / `styles.css` を添付する設定を追加した
- タグ（`v` 接頭辞許容）と `manifest.json` の version の一致チェックを追加した
- `README.md` に自動リリース手順を追記し、`npm test` 全件通過を確認した

## 追加のやるべきこと（2026-02-22 v1.0.1 バグ修正）
- 「ホットキー設定を開く」ボタンの検索語がグループ名を参照するよう修正
- `v1.0.1` リリース向けに `manifest.json` / `versions.json` / `package.json` のバージョンを更新
- `build:brat` と `npm test` を実行してリリース前確認

## やったこと（2026-02-22 v1.0.1 バグ修正）
- 「ホットキー設定を開く」ボタンで、固定文言ではなくグループ名を含むコマンドラベルを検索語に使うよう修正
- `manifest.json` / `versions.json` / `package.json` を `1.0.1` に更新し、バージョン整合を取った
- `npm run build:brat` で配布ファイルを更新し、`npm test` 全件通過を確認した

## 追加のやるべきこと（2026-02-22 v1.0.2 バグ修正）
- 「ホットキー設定を開く」時の検索語から方向ラベル（例: 前のファイルへ移動）を除去し、グループ名ベースに修正
- `v1.0.2` リリース向けに `manifest.json` / `versions.json` / `package.json` のバージョンを更新
- `build:brat` と `npm test` を実行してからコミットし、タグを作成してpush

## やったこと（2026-02-22 v1.0.2 バグ修正）
- 「ホットキー設定を開く」ボタン押下時の検索語を `File Navigator: {グループ名}` 形式に変更し、方向ラベルが混ざらないように修正
- `manifest.json` / `versions.json` / `package.json` を `1.0.2` に更新した
- `npm run build:brat` で配布ファイル（`main.js` など）を更新し、`npm test` 全件通過を確認した


## 追加のやるべきこと（2026-02-23 コマンドラベル整合）
- 「次へ／前へ」コマンド名を「新しい／古い」系の表現に変更し、最新／最古コマンドとの整合性を取る
- 日本語／英語ロケールのコマンド表示名を更新する
- テスト実行で表示名変更による影響がないことを確認する

## やったこと（2026-02-23 コマンドラベル整合）
- 「次のファイルへ移動／前のファイルへ移動」を「新しいファイルへ移動／古いファイルへ移動」に変更
- 最古コマンドの表記を「最古のファイルへ移動」に統一し、日本語／英語ロケールを更新
- README のコマンド説明とグループ別コマンド説明を新ラベル（古い／新しい／最新／最古）に合わせて更新
- `npm test` を実行し、全テスト通過を確認

## 追加のやるべきこと（2026-02-23 v1.0.3 リリース）
- 直前のコマンドラベル変更を含むリリース向けにバージョンを更新する
- BRAT配布用ファイルを再生成して最新変更を反映する
- テストを実行し、グリーンを確認してコミットする

## やったこと（2026-02-23 v1.0.3 リリース）
- `package.json` / `manifest.json` / `versions.json` / `package-lock.json` のバージョンを `1.0.3` に更新
- `npm run build:brat` を実行し、配布ファイル（`main.js` / `manifest.json` / `styles.css`）を同期
- `npm test` を実行し、全テスト通過を確認

## 追加のやるべきこと（2026-02-23 v1.0.3 タグ作成）
- v1.0.3 リリース用タグを作成する
- タグ作成手順を実施し、状態を確認する
- テスト実行で最終状態がグリーンであることを確認する

## やったこと（2026-02-23 v1.0.3 タグ作成）
- `npm test` を実行し、全テストがグリーンであることを確認
- `v1.0.3` の注釈付きタグを作成
- タグ一覧で `v1.0.3` が作成済みであることを確認

## 追加のやるべきこと（2026-02-24 Biome導入）
- Biome を開発依存に追加する
- `biome.json` を追加して既存コーディングスタイルに合わせる
- `package.json` に format スクリプトを追加する
- テスト実行でグリーン確認

## やったこと（2026-02-24 Biome導入）
- `@biomejs/biome` を開発依存に追加
- `biome.json` を追加し、スペース2桁インデント・シングルクォート方針を設定
- `package.json` に `npm run format` を追加
- `README.md` に Formatting セクションを追記
- `npm test` を実行し、全テスト通過を確認

## 追加のやるべきこと（2026-02-24 コマンド方向の相談）
- コマンド方向（新しい/古い/最新/最古）の命名と仕様を整理する
- 現実装のソート順と移動方向の対応を確認する
- 認識ずれがあれば改善案を提示する

## やったこと（2026-02-24 コマンド方向の相談）
- `src/main.ts` の `resolveNavigationTarget` を確認し、`latest/oldest` と `next/previous` の算出ロジックを整理
- i18n 文言（新しい/古い/最新/最古）と実際の移動方向の対応を確認
- テスト（`tests/navigation.test.ts`）から現在仕様を確認

## 追加のやるべきこと（2026-02-24 新しい/古い方向の整合）
- `next/previous` が `sortDirection` に依存せず固定方向になっている問題を修正する
- `sortDirection=desc` 時でも「新しい/古い」が文言通り動くテストを追加する
- テスト実行でグリーン確認しコミットする

## 追加のやるべきこと（2026-02-24 Biome運用ルール追記）
- AGENTS.md に「フォーマットは Biome を利用する」方針を追加する
- ルール追記を単独コミットで記録する
- 進行中の方向整合修正は別コミットに分離する

## やったこと（2026-02-24 Biome運用ルール追記）
- `AGENTS.md` の共通ルールに「`biome`でフォーマットを行うこと」を追加
- ルール追記を機能修正と分離してコミットする準備を実施

## やったこと（2026-02-24 新しい/古い方向の整合）
- `next/previous` の移動量を `sortDirection` に応じて切り替えるよう修正
- `sortDirection=desc` でも `next=新しい方向` / `previous=古い方向` になるテストを2件追加
- `npm test` を実行し、全テスト通過を確認

## 追加のやるべきこと（2026-02-24 v1.0.4 リリース）
- `package.json` / `manifest.json` / `versions.json` のバージョンを `1.0.4` に更新する
- `npm run build:brat` で配布ファイルを同期する
- `npm test` を実行してグリーン確認する
- リリースコミット作成後に `v1.0.4` タグを作成して push する

## やったこと（2026-02-24 v1.0.4 リリース）
- `package.json` / `manifest.json` / `versions.json` / `package-lock.json` のバージョンを `1.0.4` に更新
- `npm run build:brat` を実行し、配布ファイル（`main.js` / `manifest.json` / `styles.css`）を同期
- `npm test` を実行し、全テスト通過を確認
- リリースコミット作成後に `v1.0.4` タグを作成して push
